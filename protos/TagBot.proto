#VRML_SIM R2025a utf8

PROTO TagBot [
  field SFVec3f    translation 0 0 0
  field SFRotation rotation    0 0 1 0
  field SFString   name        "TagBot"
  field SFString   controller  "target_controller"
  field SFColor    bodyColor   0 0 1
  field SFColor    wheelColor  1 0 0
  field SFInt32    channel     1
]
{
  Robot {
    translation IS translation
    rotation IS rotation
    children [
      GPS { }
      Compass { }
      Receiver {
        channel IS channel
      }
      DistanceSensor {
        translation 0.04 0.02 0.03
        rotation 0 0 1 1.5708
        name "ds_front_left"
        lookupTable [ 0 1000 0, 0.2 0 0 ]
        type "infra-red"
      }
      DistanceSensor {
        translation 0.04 -0.02 0.03
        rotation 0 0 1 1.5708
        name "ds_front_right"
        lookupTable [ 0 1000 0, 0.2 0 0 ]
        type "infra-red"
      }
      DEF Body Pose {
        translation 0 0 0.0415
        children [
          Shape {
            appearance PBRAppearance {
              baseColor IS bodyColor
              roughness 1
              metalness 0
            }
            geometry Cylinder {
              height 0.08
              radius 0.035
            }
          }
        ]
      }
      HingeJoint {
        jointParameters HingeJointParameters {
          position 0
          anchor 0.045 0 0.025
        }
        device [
          RotationalMotor {
            name "motor_1"
          }
        ]
        endPoint Solid {
          translation 0.035 0 0.025
          rotation 0 0 1 1.57
          children [
            DEF Wheel Shape {
              appearance PBRAppearance {
                baseColor IS wheelColor
                roughness 1
                metalness 0
              }
              geometry Cylinder {
                height 0.01
                radius 0.025
              }
            }
          ]
          name "left_wheel"
          boundingObject USE Wheel
          physics DEF Wheel_Physics Physics { }
        }
      }
      HingeJoint {
        jointParameters HingeJointParameters {
          position 0
          anchor -0.045 0 0.025
        }
        device [
          RotationalMotor {
            name "motor_2"
          }
        ]
        endPoint Solid {
          translation -0.035 0 0.025
          rotation 0 0 1 1.57
          children [
            USE Wheel
          ]
          name "right_wheel"
          boundingObject USE Wheel
          physics USE Wheel_Physics
        }
      }
      Solid {
        translation 0 0.035 0.07
        children [
          DEF Eye Shape {
            appearance PBRAppearance {
              baseColor 0 0 0
            }
            geometry Box {
              size 0.005 0.005 0.005
            }
          }
        ]
        name "eye"
        boundingObject USE Eye
        physics Physics { }
      }
    ]
    name IS name
    boundingObject USE Body
    physics Physics {
      density 800
    }
    controller IS controller
  }
}
